---
import { getCollection } from 'astro:content';

import { getTitleFromPost } from '../util.astro';
import Main from '../layouts/Main.astro';

const posts = await getCollection('posts');
---

<Main title="Home">
  {await Promise.all(
    posts.map(async (post) => {
      const title = await getTitleFromPost(post);
      return (
        <div>
          <p><a href={`/posts/${post.id}/`}>{title}</a></p>
          <p>{post.data.published.toLocaleDateString()}</p>
        </div>
      );
    })
  )}
</Main>

<style>
  div {
    display: flex;
    padding: var(--size-2);
  }
  div > p:nth-child(1) {
    flex: 1;
  }
</style>
